<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Documentation</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/github.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>

    
</head>
<body>
    <div id="page">
        <a name="top" />
        <header id="header">
			<div style="overflow:hidden">
				<div style="float:left">
					<img src="assets/img/logo.png"/>
					
				</div>	
				<div style="float:left;padding-top: 15px;padding-left: 30px;">
		            <h1><a href="">Documentation</a></h1>

				</div>
			</div>
        </header>
        

<div id="sidebar">
    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="01-0-introduction.html">Introduction</a>
            
                
    <ol>
    
        <li>
            <a href="01-1-whats-new-3.html">What's new in 3.0?</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="01-2-migrationto3.html">Upgrading from 2.x versions</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="01-3-gettingstarted.html">Getting Started (Tutorial)</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-0-distributed-data-structures.html">Distributed Data Structures</a>
            
                
    <ol>
    
        <li>
            <a href="02-1-0-map.html">Distributed Map</a>
            
                
    <ol>
    
        <li>
            <a href="02-1-10-mapentry.html">Entry Statistics</a>
            
        </li>
    
        <li>
            <a href="02-1-11-mapinmemoryformat.html">In Memory Format</a>
            
        </li>
    
        <li>
            <a href="02-1-1-mapbackup.html">Backups</a>
            
        </li>
    
        <li>
            <a href="02-1-2-mapeviction.html">Eviction</a>
            
        </li>
    
        <li>
            <a href="02-1-3-mappersistence.html">Persistence</a>
            
        </li>
    
        <li>
            <a href="02-1-4-mapquery.html">Query</a>
            
        </li>
    
        <li>
            <a href="02-1-5-mapindex.html">Indexing</a>
            
        </li>
    
        <li>
            <a href="02-1-6-mapcontinuousquery.html">Continuous Query</a>
            
        </li>
    
        <li>
            <a href="02-1-7-mapentryprocessor.html">Entry Processor</a>
            
        </li>
    
        <li>
            <a href="02-1-8-mapinterceptor.html">Interceptors</a>
            
        </li>
    
        <li>
            <a href="02-1-9-mapnearcache.html">Near Cache</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-2-0-queue.html">Distributed Queue</a>
            
                
    <ol>
    
        <li>
            <a href="02-2-0-queue.html">Persistence</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-3-0-multimap.html">Distributed MultiMap</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-4-0-topic.html">Distributed Topic</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-5-0-set.html">Distributed Set</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-6-0-list.html">Distributed List</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-7-0-lock.html">Distributed Lock</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="02-8-0-events.html">Distributed Events</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="03-0-serialization.html">Serialization</a>
            
                
    <ol>
    
        <li>
            <a href="03-1-dataserializable.html">Data Serializable</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="03-2-portable.html">Portable Serialization</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="03-3-custom.html">Custom Serialization</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="04-0-dataaffinity.html">Data Affinity</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="05-0-jmx.html">Monitoring with JMX</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="06-0-clusterutilities.html">Cluster Utilities</a>
            
                
    <ol>
    
        <li>
            <a href="06-1-clusterinterface.html">Cluster Interface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="06-2-idgenerator.html">Cluster-wide Id Generator</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="07-0-transactions.html">Transactions</a>
            
                
    <ol>
    
        <li>
            <a href="07-1-transactioninterface.html">Transaction Interface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="07-2-jeeintegration.html">J2EE Integration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="08-0-executorservice.html">Distributed Executor Service</a>
            
                
    <ol>
    
        <li>
            <a href="08-1-distributedexecution.html">Distributed Execution</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="08-2-executioncancellation.html">Execution Cancellation</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="08-3-executioncallback.html">Execution Callback</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="09-0-httpsessionclustering.html">Http Session Clustering with HazelcastWM</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="10-0-wanreplication.html">WAN Replication</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="11-0-spi.html">Service Provider Interface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-0-config.html">Configuration</a>
            
                
    <ol>
    
        <li>
            <a href="12-1-configgroup.html">Creating Separate Clusters</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-2-0-networkconfig.html">Network Configuration</a>
            
                
    <ol>
    
        <li>
            <a href="12-2-1-configtcpip.html">Configuring TCP/IP Cluster</a>
            
        </li>
    
        <li>
            <a href="12-2-2-configspecifyinterfaces.html">Specifying Network Interfaces</a>
            
        </li>
    
        <li>
            <a href="12-2-3-ec2autodiscovery.html">EC2 Auto Discovery</a>
            
        </li>
    
        <li>
            <a href="12-2-4-networkpartitioning.html">Network Partitioning (Split-Brain Syndrome)</a>
            
        </li>
    
        <li>
            <a href="12-2-5-ssl.html">SSL</a>
            
        </li>
    
        <li>
            <a href="12-2-6-encryption.html">Encryption</a>
            
        </li>
    
        <li>
            <a href="12-2-7-socketinterceptor.html">Socket Interceptor</a>
            
        </li>
    
        <li>
            <a href="12-2-8-ipv6.html">IPv6 Support</a>
            
        </li>
    
        <li>
            <a href="12-2-9-outboundports.html">Restricting Outbound Ports</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-3-partitiongroupconfig.html">Partition Group Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-4-listenerconfig.html">Listener Configurations</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-5-wildcardconfiguration.html">Wildcard Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-6-configurationproperties.html">Advanced Configuration Properties</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-7-logging.html">Logging Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="12-8-enterpriseconfig.html">Setting License Key &lt;sup&gt;(Enterprise Edition Only)&lt;/sup&gt;</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="13-0-hibernatesecondlevelcache.html">Hibernate Second Level Cache</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-0-springintegration.html">Spring Integration</a>
            
                
    <ol>
    
        <li>
            <a href="14-1-springconfig.html">Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-2-springcontext.html">Spring Managed Context</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-3-springcache.html">Spring Cache</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-4-springhibernate.html">Hibernate 2nd Level Cache Config</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-5-springjpa.html">Spring Data - JPA</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="14-6-springmongodb.html">Spring Data - MongoDB</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="15-0-clients.html">Clients</a>
            
                
    <ol>
    
        <li>
            <a href="15-1-nativeclient.html">Native Client</a>
            
                
    <ol>
    
        <li>
            <a href="15-1-nativeclient.html">Java Client</a>
            
        </li>
    
        <li>
            <a href="15-1-nativeclient.html">CSharp Client &lt;sup&gt;(Enterprise Edition Only)&lt;/sup&gt;</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="15-2-memcacheclient.html">Memcache Client</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="15-3-restclient.html">Rest Client</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-0-managementcenter.html">Management Center</a>
            
                
    <ol>
    
        <li>
            <a href="16-1-introduction.html">Introduction</a>
            
                
    <ol>
    
        <li>
            <a href="16-1-introduction.html">Installation</a>
            
        </li>
    
        <li>
            <a href="16-1-introduction.html">User Administration</a>
            
        </li>
    
        <li>
            <a href="16-1-introduction.html">Tool Overview</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-2-maps.html">Maps</a>
            
                
    <ol>
    
        <li>
            <a href="16-2-maps.html">Monitoring Maps</a>
            
        </li>
    
        <li>
            <a href="16-2-maps.html">Map Browser</a>
            
        </li>
    
        <li>
            <a href="16-2-maps.html">Map Configuration</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-3-queues.html">Queues</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-4-topics.html">Topics</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-5-members.html">Members</a>
            
                
    <ol>
    
        <li>
            <a href="16-5-members.html">Monitoring</a>
            
        </li>
    
        <li>
            <a href="16-5-members.html">Operations</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-6-logs.html">System Logs</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-7-scripting.html">Scripting</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-8-timetravel.html">Time Travel</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="16-9-console.html">Console</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="17-0-misc.html">Miscellaneous</a>
            
                
    <ol>
    
        <li>
            <a href="17-1-commongotchas.html">Common Gotchas</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="17-2-clustertesthowto.html">Testing Cluster</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="17-3-todo.html">Planned Features</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
        </ul>
    </nav>
    
</div>

        <div id="content">
            <a name="spring-managed-context"></a><h2>Spring Managed Context</h2>
<p>It&#39;s often desired to access Spring managed beans, to apply bean properties or to apply factory callbacks such as <code>ApplicationContextAware</code>, <code>BeanNameAware</code> or to apply bean post-processing such as <code>InitializingBean</code>, <code>@PostConstruct</code> like annotations while using Hazelcast distributed <code>ExecutorService</code> or more generally any Hazelcast managed object. Achieving those features are as simple as adding <code>@SpringAware</code> annotation to your distributed object types. Once you have configured HazelcastInstance as explained in <a href="#SpringConfig">Spring configuration</a>, just mark any distributed type with <code>@SpringAware</code> annotation.</p>
<pre><code class="lang-xml">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:hz=&quot;http://www.hazelcast.com/schema/spring&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/context
                http://www.springframework.org/schema/context/spring-context-3.0.xsd
                http://www.hazelcast.com/schema/spring
                http://www.hazelcast.com/schema/spring/hazelcast-spring-3.0.xsd&quot;&gt;

    &lt;context:annotation-config /&gt;

    &lt;hz:hazelcast id=&quot;instance&quot;&gt;
        &lt;hz:config&gt;
            &lt;hz:group name=&quot;dev&quot; password=&quot;password&quot;/&gt;
            &lt;hz:network port=&quot;5701&quot; port-auto-increment=&quot;false&quot;&gt;
                &lt;hz:join&gt;
                    &lt;hz:multicast enabled=&quot;false&quot; /&gt;
                    &lt;hz:tcp-ip enabled=&quot;true&quot;&gt;
                        &lt;hz:members&gt;10.10.1.2, 10.10.1.3&lt;/hz:members&gt;
                    &lt;/hz:tcp-ip&gt;
                &lt;/hz:join&gt;
            &lt;/hz:network&gt;
            ...
        &lt;/hz:config&gt;
    &lt;/hz:hazelcast&gt;

    &lt;bean id=&quot;someBean&quot; class=&quot;com.hazelcast.examples.spring.SomeBean&quot; scope=&quot;singleton&quot; /&gt;
    ...
&lt;/beans&gt;</code></pre>
<p><strong>ExecutorService example:</strong></p>
<pre><code class="lang-java">@SpringAware
public class SomeTask implements Callable&lt;Long&gt;, ApplicationContextAware, Serializable {

    private transient ApplicationContext context;

    private transient SomeBean someBean;

    public Long call() throws Exception {
        return someBean.value;
    }

    public void setApplicationContext(final ApplicationContext applicationContext)
        throws BeansException {
        context = applicationContext;
    }

    @Autowired
    public void setSomeBean(final SomeBean someBean) {
        this.someBean = someBean;
    }
}</code></pre>
<pre><code class="lang-java">HazelcastInstance hazelcast = (HazelcastInstance) context.getBean(&quot;hazelcast&quot;);
SomeBean bean = (SomeBean) context.getBean(&quot;someBean&quot;);

Future&lt;Long&gt; f = hazelcast.getExecutorService().submit(new SomeTask());
Assert.assertEquals(bean.value, f.get().longValue());

// choose a member
Member member = hazelcast.getCluster().getMembers().iterator().next();

Future&lt;Long&gt; f2 = (Future&lt;Long&gt;) hazelcast.getExecutorService()
    .submitToMember(new SomeTask(), member);
Assert.assertEquals(bean.value, f2.get().longValue());</code></pre>
<p><strong>Distributed Map value example:</strong></p>
<pre><code class="lang-java">@SpringAware
@Component(&quot;someValue&quot;)
@Scope(&quot;prototype&quot;)
public class SomeValue implements Serializable, ApplicationContextAware {

    transient ApplicationContext context;

    transient SomeBean someBean;

    transient boolean init = false;

    public void setApplicationContext(final ApplicationContext applicationContext)
        throws BeansException {
        context = applicationContext;
    }

    @Autowired
    public void setSomeBean(final SomeBean someBean) {
        this.someBean = someBean;
    }

    @PostConstruct
    public void init() {
        someBean.doSomethingUseful();
        init = true;
    }
    ...
}</code></pre>
<p>On Node-1;</p>
<pre><code class="lang-java">HazelcastInstance hazelcast = (HazelcastInstance) context.getBean(&quot;hazelcast&quot;);
SomeValue value = (SomeValue) context.getBean(&quot;someValue&quot;)
IMap&lt;String, SomeValue&gt; map = hazelcast.getMap(&quot;values&quot;);
map.put(&quot;key&quot;, value);</code></pre>
<p>On Node-2;</p>
<pre><code class="lang-java">HazelcastInstance hazelcast = (HazelcastInstance) context.getBean(&quot;hazelcast&quot;);
IMap&lt;String, SomeValue&gt; map = hazelcast.getMap(&quot;values&quot;);
SomeValue value = map.get(&quot;key&quot;);
Assert.assertTrue(value.init);</code></pre>
<p><em>Note that, Spring managed properties/fields are marked as <code>transient</code>.</em></p>




        </div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a>
            - <a href="?print=1">Print current page</a> - <a href="all.html?print=1">Print all pages</a>
        </footer>
    </div>
</body>
</html>
